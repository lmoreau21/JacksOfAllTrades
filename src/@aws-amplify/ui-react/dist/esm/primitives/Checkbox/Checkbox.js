import{__rest as e}from"tslib";import*as t from"react";import a from"classnames";import{Flex as s}from"../Flex/Flex.js";import{ComponentClassNames as o}from"../shared/constants.js";import"../View/View.js";import{IconCheck as d}from"../Icon/icons/IconCheck.js";import{IconIndeterminate as c}from"../Icon/icons/IconIndeterminate.js";import{Input as r}from"../Input/Input.js";import{Text as i}from"../Text/Text.js";import{VisuallyHidden as n}from"../VisuallyHidden/VisuallyHidden.js";import{getTestId as l}from"../utils/testUtils.js";import{useStableId as m}from"../utils/useStableId.js";import{useCheckbox as b}from"./useCheckbox.js";import{splitPrimitiveProps as h}from"../shared/styleUtils.js";import{classNameModifierByFlag as u}from"../shared/utils.js";const k=t.forwardRef(((k,f)=>{var{checked:C,className:p,defaultChecked:x,hasError:I,isDisabled:j,isIndeterminate:E,label:y,labelHidden:N,labelPosition:B,onChange:g,testId:F}=k,H=e(k,["checked","className","defaultChecked","hasError","isDisabled","isIndeterminate","label","labelHidden","labelPosition","onChange","testId"]);const{baseStyleProps:V,flexContainerStyleProps:D,rest:P}=h(H),S=void 0!==C?C:x,{dataChecked:v,dataFocus:w,onBlur:L,onChange:O,onFocus:T,setDataChecked:U}=b(S,g);t.useEffect((()=>{void 0!==C&&C!==v&&U(C)}),[C,v,U]);const q=m();t.useEffect((()=>{document.querySelector(`[data-id="${q}"]`).indeterminate=E}),[q,E]);const M=l(F,o.CheckboxButton),R=l(F,o.CheckboxIcon),$=l(F,o.CheckboxLabel),z=a(o.CheckboxButton,u(o.CheckboxButton,"disabled",j),u(o.CheckboxButton,"error",I),u(o.CheckboxButton,"focused",w)),A=a(o.CheckboxIcon,u(o.CheckboxIcon,"checked",v),u(o.CheckboxIcon,"disabled",j)),G=t.useMemo((()=>E?t.createElement(c,{className:a(A,u(o.CheckboxIcon,"indeterminate",E)),"data-testid":R}):t.createElement(d,{className:A,"data-checked":v,"data-disabled":j,"data-testid":R})),[v,A,R,j,E]);return t.createElement(s,Object.assign({as:"label",className:a(o.Checkbox,u(o.Checkbox,"disabled",j),p),"data-disabled":j,"data-label-position":B,testId:F},V,D),t.createElement(n,null,t.createElement(r,Object.assign({checked:C,className:o.CheckboxInput,"data-id":q,defaultChecked:x,isDisabled:j,onBlur:L,onChange:O,onFocus:T,ref:f,type:"checkbox"},P))),y&&t.createElement(i,{as:"span",className:a(o.CheckboxLabel,{[o.VisuallyHidden]:N}),"data-disabled":j,testId:$},y),t.createElement(s,{"aria-hidden":"true",as:"span",className:z,"data-checked":v,"data-disabled":j,"data-focus":w,"data-error":I,testId:M},G))}));k.displayName="Checkbox";export{k as Checkbox};
