import{__rest as e}from"tslib";import t from"classnames";import a from"lodash/debounce";import*as r from"react";import{Flex as s}from"../Flex/Flex.js";import{Grid as l}from"../Grid/Grid.js";import{Text as i}from"../Text/Text.js";import{Pagination as n}from"../Pagination/Pagination.js";import{usePagination as o}from"../Pagination/usePagination.js";import{SearchField as c}from"../SearchField/SearchField.js";import{ComponentClassNames as m,ComponentText as d}from"../shared/constants.js";import{strHasLength as h}from"../shared/utils.js";import{getPageCount as u,getItemsAtPage as g,itemHasText as p}from"./utils.js";const f=10,j=t=>{var{children:a,direction:l="column",items:i}=t,n=e(t,["children","direction","items"]);return r.createElement(s,Object.assign({direction:l},n),Array.isArray(i)?i.map(a):null)},P=t=>{var{children:a,items:s}=t,i=e(t,["children","items"]);return r.createElement(l,Object.assign({},i),Array.isArray(s)?s.map(a):null)},b=l=>{var{className:b,isSearchable:C,isPaginated:E,items:N,itemsPerPage:y=f,searchFilter:F=p,searchLabel:A=d.Collection.searchButtonLabel,searchNoResultsFound:S,searchPlaceholder:x,type:I="list",testId:O}=l,v=e(l,["className","isSearchable","isPaginated","items","itemsPerPage","searchFilter","searchLabel","searchNoResultsFound","searchPlaceholder","type","testId"]);const[L,R]=r.useState(),G=r.useCallback(a(R,300),[R]);N=Array.isArray(N)?N:[],C&&h(L)&&(N=N.filter((e=>F(e,L))));const T=o({totalPages:u(N.length,y)});E&&(N=g(N,T.currentPage,y));const k="list"===I?r.createElement(j,Object.assign({className:m.CollectionItems,items:N},v)):"grid"===I?r.createElement(P,Object.assign({className:m.CollectionItems,items:N},v)):null;return r.createElement(s,{testId:O,className:t(m.Collection,b)},C?r.createElement(s,{className:m.CollectionSearch},r.createElement(c,{label:A,placeholder:x,onChange:e=>G(e.target.value),onClear:()=>R("")})):null,((e,t,a)=>t.length?e:a||r.createElement(s,{justifyContent:"center"},r.createElement(i,null,d.Collection.searchNoResultsFound)))(k,N,S),E?r.createElement(s,{className:m.CollectionPagination},r.createElement(n,Object.assign({},T))):null)};b.displayName="Collection";export{b as Collection};
