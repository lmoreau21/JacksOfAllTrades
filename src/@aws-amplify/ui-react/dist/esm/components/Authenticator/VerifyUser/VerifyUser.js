import e from"react";import{getActorContext as t,translate as r,defaultFormFieldOptions as o,censorPhoneNumber as i,censorAllButFirstAndLast as n}from"@aws-amplify/ui";import{Flex as a}from"../../../primitives/Flex/Flex.js";import{Heading as m}from"../../../primitives/Heading/Heading.js";import{Radio as s}from"../../../primitives/Radio/Radio.js";import{RadioGroupField as l}from"../../../primitives/RadioGroupField/RadioGroupField.js";import{useAuthenticator as u}from"../hooks/useAuthenticator/index.js";import{useCustomComponents as c}from"../hooks/useCustomComponents/index.js";import{useFormHandlers as d}from"../hooks/useFormHandlers/useFormHandlers.js";import{RemoteErrorMessage as f}from"../shared/RemoteErrorMessage.js";import{TwoButtonSubmitFooter as p}from"../shared/TwoButtonSubmitFooter.js";import{RouteContainer as h}from"../RouteContainer/RouteContainer.js";const v=(e,t)=>{const o=r(e);let a=t;if("Phone Number"===e)a=i(t);else if("Email"===e){const e=t.split("@");a=`${n(e[0])}@${e[1]}`}return`${o}: ${a}`},E=({className:i,variation:n})=>{const{components:{VerifyUser:{Header:m=E.Header,Footer:b=E.Footer}}}=c(),{_state:y,isPending:F}=u((e=>[e.isPending])),{handleChange:j,handleSubmit:g}=d(),x=t(y),H=F?e.createElement(e.Fragment,null,"Verifyingâ€¦"):e.createElement(e.Fragment,null,r("Verify")),C=e.createElement(l,{label:r("Verify Contact"),labelHidden:!0,name:"verify_context",isDisabled:F},(t=>{const r=[];for(const[i,n]of Object.entries(t)){const t=e.createElement(s,{name:"unverifiedAttr",value:i,key:i},v(o[i].label,n));r.push(t)}return r})(x.unverifiedAttributes));return e.createElement(h,{className:i,variation:n},e.createElement("form",{"data-amplify-form":"","data-amplify-authenticator-verifyuser":"",method:"post",onChange:j,onSubmit:g},e.createElement(a,{as:"fieldset",direction:"column",isDisabled:F},e.createElement(m,null),C,e.createElement(f,null),e.createElement(p,{cancelButtonText:r("Skip"),cancelButtonSendType:"SKIP",submitButtonText:H}),e.createElement(b,null))))};E.Header=function(){return e.createElement(m,{level:3},r("Account recovery requires verified contact information"))},E.Footer=function(){return null};export{E as VerifyUser};
