import*as e from"react";import{getServiceFacade as t,createAuthenticatorMachine as r,listenToAuthHub as s}from"@aws-amplify/ui";import{useSelector as o,useInterpret as n}from"@xstate/react";import i from"lodash/isEmpty";import{areArrayValuesEqual as a}from"../../../../helpers/utils.js";const c=e.createContext({}),u=({children:t})=>{const o=e.useContext(c),a=n(r),u=e.useMemo((()=>i(o)?{service:a}:o),[o,a]),{service:m}=u;return e.useEffect((()=>s(m)),[m]),e.createElement(c.Provider,{value:u},t)},m=r=>{const s=(()=>{const{service:t}=e.useContext(c);if(!t)throw new Error("Please ensure you wrap your App with `Authenticator.Provider`.\nSee the `useAuthenticator` section on https://ui.docs.amplify.aws/connected-components/authenticator.");return t})(),{send:n}=s,i=e.useCallback((e=>Object.assign({},t({send:n,state:e}))),[n]),u=o(s,(e=>i(e)),((e,t)=>{if(!r)return!1;const s=r(e),o=r(t);return a(s,o)}));return Object.assign(Object.assign({},u),{_state:s.getSnapshot(),_send:n})};export{c as AuthenticatorContext,u as Provider,m as useAuthenticator};
