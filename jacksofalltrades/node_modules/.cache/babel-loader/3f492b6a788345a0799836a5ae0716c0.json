{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/lmore/OneDrive/Documents/GitHub/JacksOfAllTrades/jacksofalltrades/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport { __awaiter as e } from \"tslib\";\nimport { Hub as s, DataStore as t } from \"aws-amplify\";\nimport { UI_CHANNEL as i, ACTION_DATASTORE_UPDATE_STARTED as o, EVENT_ACTION_DATASTORE_UPDATE as r, DATASTORE_QUERY_BY_ID_ERROR as d, ACTION_DATASTORE_UPDATE_FINISHED as a } from \"./constants.js\";\nimport { getErrorMessage as m } from \"../../helpers/utils.js\";\nimport { AMPLIFY_SYMBOL as n } from \"../../helpers/constants.js\";\nimport { useTypeCastFields as c } from \"./shared/useTypeCastFields.js\";\n\nvar f = function f(_ref) {\n  var f = _ref.fields,\n      l = _ref.id,\n      p = _ref.model,\n      h = _ref.schema;\n  var v = c({\n    fields: f,\n    modelName: p.name,\n    schema: h\n  });\n  return function () {\n    return e(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var _e, _m;\n\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              s.dispatch(i, {\n                event: o,\n                data: {\n                  fields: v,\n                  id: l\n                }\n              }, r, n);\n              _context.next = 4;\n              return t.query(p, l);\n\n            case 4:\n              _e = _context.sent;\n\n              if (_e) {\n                _context.next = 7;\n                break;\n              }\n\n              throw new Error(\"\".concat(d, \": \").concat(l));\n\n            case 7:\n              _context.next = 9;\n              return t.save(p.copyOf(_e, function (e) {\n                Object.assign(e, v);\n              }));\n\n            case 9:\n              _m = _context.sent;\n              s.dispatch(i, {\n                event: a,\n                data: {\n                  fields: v,\n                  id: l,\n                  item: _m\n                }\n              }, r, n);\n              _context.next = 16;\n              break;\n\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context[\"catch\"](0);\n              s.dispatch(i, {\n                event: a,\n                data: {\n                  fields: v,\n                  id: l,\n                  errorMessage: m(_context.t0)\n                }\n              }, r, n);\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 13]]);\n    }));\n  };\n};\n\nexport { f as useDataStoreUpdateAction };","map":{"version":3,"names":["__awaiter","e","Hub","s","DataStore","t","UI_CHANNEL","i","ACTION_DATASTORE_UPDATE_STARTED","o","EVENT_ACTION_DATASTORE_UPDATE","r","DATASTORE_QUERY_BY_ID_ERROR","d","ACTION_DATASTORE_UPDATE_FINISHED","a","getErrorMessage","m","AMPLIFY_SYMBOL","n","useTypeCastFields","c","f","fields","l","id","p","model","h","schema","v","modelName","name","dispatch","event","data","query","Error","save","copyOf","Object","assign","item","errorMessage","useDataStoreUpdateAction"],"sources":["C:/Users/lmore/OneDrive/Documents/GitHub/JacksOfAllTrades/jacksofalltrades/node_modules/@aws-amplify/ui-react/dist/esm/hooks/actions/useDataStoreUpdateAction.js"],"sourcesContent":["import{__awaiter as e}from\"tslib\";import{Hub as s,DataStore as t}from\"aws-amplify\";import{UI_CHANNEL as i,ACTION_DATASTORE_UPDATE_STARTED as o,EVENT_ACTION_DATASTORE_UPDATE as r,DATASTORE_QUERY_BY_ID_ERROR as d,ACTION_DATASTORE_UPDATE_FINISHED as a}from\"./constants.js\";import{getErrorMessage as m}from\"../../helpers/utils.js\";import{AMPLIFY_SYMBOL as n}from\"../../helpers/constants.js\";import{useTypeCastFields as c}from\"./shared/useTypeCastFields.js\";const f=({fields:f,id:l,model:p,schema:h})=>{const v=c({fields:f,modelName:p.name,schema:h});return()=>e(void 0,void 0,void 0,(function*(){try{s.dispatch(i,{event:o,data:{fields:v,id:l}},r,n);const e=yield t.query(p,l);if(!e)throw new Error(`${d}: ${l}`);const m=yield t.save(p.copyOf(e,(e=>{Object.assign(e,v)})));s.dispatch(i,{event:a,data:{fields:v,id:l,item:m}},r,n)}catch(e){s.dispatch(i,{event:a,data:{fields:v,id:l,errorMessage:m(e)}},r,n)}}))};export{f as useDataStoreUpdateAction};\n"],"mappings":";AAAA,SAAOA,SAAS,IAAIC,CAApB,QAA0B,OAA1B;AAAkC,SAAOC,GAAG,IAAIC,CAAd,EAAgBC,SAAS,IAAIC,CAA7B,QAAmC,aAAnC;AAAiD,SAAOC,UAAU,IAAIC,CAArB,EAAuBC,+BAA+B,IAAIC,CAA1D,EAA4DC,6BAA6B,IAAIC,CAA7F,EAA+FC,2BAA2B,IAAIC,CAA9H,EAAgIC,gCAAgC,IAAIC,CAApK,QAA0K,gBAA1K;AAA2L,SAAOC,eAAe,IAAIC,CAA1B,QAAgC,wBAAhC;AAAyD,SAAOC,cAAc,IAAIC,CAAzB,QAA+B,4BAA/B;AAA4D,SAAOC,iBAAiB,IAAIC,CAA5B,QAAkC,+BAAlC;;AAAkE,IAAMC,CAAC,GAAC,iBAAoC;EAAA,IAA3BA,CAA2B,QAAlCC,MAAkC;EAAA,IAAtBC,CAAsB,QAAzBC,EAAyB;EAAA,IAAdC,CAAc,QAApBC,KAAoB;EAAA,IAALC,CAAK,QAAZC,MAAY;EAAC,IAAMC,CAAC,GAACT,CAAC,CAAC;IAACE,MAAM,EAACD,CAAR;IAAUS,SAAS,EAACL,CAAC,CAACM,IAAtB;IAA2BH,MAAM,EAACD;EAAlC,CAAD,CAAT;EAAgD,OAAM;IAAA,OAAI3B,CAAC,CAAC,KAAK,CAAN,EAAQ,KAAK,CAAb,EAAe,KAAK,CAApB,0CAAuB;MAAA;;MAAA;QAAA;UAAA;YAAA;cAAA;cAAgBE,CAAC,CAAC8B,QAAF,CAAW1B,CAAX,EAAa;gBAAC2B,KAAK,EAACzB,CAAP;gBAAS0B,IAAI,EAAC;kBAACZ,MAAM,EAACO,CAAR;kBAAUL,EAAE,EAACD;gBAAb;cAAd,CAAb,EAA4Cb,CAA5C,EAA8CQ,CAA9C;cAAhB;cAAyE,OAAMd,CAAC,CAAC+B,KAAF,CAAQV,CAAR,EAAUF,CAAV,CAAN;;YAAzE;cAAuEvB,EAAvE;;cAAA,IAAgGA,EAAhG;gBAAA;gBAAA;cAAA;;cAAA,MAAwG,IAAIoC,KAAJ,WAAaxB,CAAb,eAAmBW,CAAnB,EAAxG;;YAAA;cAAA;cAAwI,OAAMnB,CAAC,CAACiC,IAAF,CAAOZ,CAAC,CAACa,MAAF,CAAStC,EAAT,EAAY,UAAAA,CAAC,EAAE;gBAACuC,MAAM,CAACC,MAAP,CAAcxC,CAAd,EAAgB6B,CAAhB;cAAmB,CAAnC,CAAP,CAAN;;YAAxI;cAAsIb,EAAtI;cAA4Ld,CAAC,CAAC8B,QAAF,CAAW1B,CAAX,EAAa;gBAAC2B,KAAK,EAACnB,CAAP;gBAASoB,IAAI,EAAC;kBAACZ,MAAM,EAACO,CAAR;kBAAUL,EAAE,EAACD,CAAb;kBAAekB,IAAI,EAACzB;gBAApB;cAAd,CAAb,EAAmDN,CAAnD,EAAqDQ,CAArD;cAA5L;cAAA;;YAAA;cAAA;cAAA;cAA6PhB,CAAC,CAAC8B,QAAF,CAAW1B,CAAX,EAAa;gBAAC2B,KAAK,EAACnB,CAAP;gBAASoB,IAAI,EAAC;kBAACZ,MAAM,EAACO,CAAR;kBAAUL,EAAE,EAACD,CAAb;kBAAemB,YAAY,EAAC1B,CAAC;gBAA7B;cAAd,CAAb,EAA8DN,CAA9D,EAAgEQ,CAAhE;;YAA7P;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAvB,EAAL;EAAA,CAAN;AAAsW,CAAnc;;AAAoc,SAAOG,CAAC,IAAIsB,wBAAZ"},"metadata":{},"sourceType":"module"}