{"ast":null,"code":"import { useContext, useMemo, useEffect } from 'react';\nimport { MapContext } from './map';\nexport default function useControl(onCreate, onRemove, opts) {\n  var context = useContext(MapContext);\n  var ctrl = useMemo(function () {\n    return onCreate(context);\n  }, []);\n  useEffect(function () {\n    var _a;\n\n    var map = context.map;\n\n    if (!map.hasControl(ctrl)) {\n      map.addControl(ctrl, (_a = opts || onRemove) === null || _a === void 0 ? void 0 : _a.position);\n    }\n\n    return function () {\n      if (typeof onRemove === 'function') {\n        onRemove(context);\n      } // Map might have been removed (parent effects are destroyed before child ones)\n\n\n      if (map.hasControl(ctrl)) {\n        map.removeControl(ctrl);\n      }\n    };\n  }, []);\n  return ctrl;\n}","map":{"version":3,"mappings":"AAAA,SAAQA,UAAR,EAAoBC,OAApB,EAA6BC,SAA7B,QAA6C,OAA7C;AAEA,SAAQC,UAAR,QAAyB,OAAzB;AAOA,eAAc,SAAUC,UAAV,CACZC,QADY,EAEZC,QAFY,EAGZC,IAHY,EAGS;EAErB,IAAMC,OAAO,GAAGR,UAAU,CAACG,UAAD,CAA1B;EACA,IAAMM,IAAI,GAAGR,OAAO,CAAC;IAAA,OAAMI,QAAQ,CAACG,OAAD,CAAd;EAAA,CAAD,EAA0B,EAA1B,CAApB;EAEAN,SAAS,CAAC,YAAK;;;IACb,IAAOQ,GAAP,GAAcF,OAAd,CAAOE,GAAP;;IACA,IAAI,CAACA,GAAG,CAACC,UAAJ,CAAeF,IAAf,CAAL,EAA2B;MACzBC,GAAG,CAACE,UAAJ,CAAeH,IAAf,EAAqB,MAACF,IAAI,IAAKD,QAAV,MAAsC,IAAtC,IAAsCO,aAAtC,GAAsC,MAAtC,GAAsCA,GAAEC,QAA7D;IACD;;IAED,OAAO,YAAK;MACV,IAAI,OAAOR,QAAP,KAAoB,UAAxB,EAAoC;QAClCA,QAAQ,CAACE,OAAD,CAAR;MACD,CAHS,CAIV;;;MACA,IAAIE,GAAG,CAACC,UAAJ,CAAeF,IAAf,CAAJ,EAA0B;QACxBC,GAAG,CAACK,aAAJ,CAAkBN,IAAlB;MACD;IACF,CARD;EASD,CAfQ,EAeN,EAfM,CAAT;EAiBA,OAAOA,IAAP;AACD","names":["useContext","useMemo","useEffect","MapContext","useControl","onCreate","onRemove","opts","context","ctrl","map","hasControl","addControl","_a","position","removeControl"],"sources":["C:\\Users\\lmore\\OneDrive\\Documents\\GitHub\\JacksOfAllTrades\\jacksofalltrades\\node_modules\\react-map-gl\\src\\components\\use-control.ts"],"sourcesContent":["import {useContext, useMemo, useEffect} from 'react';\nimport type {IControl, ControlPosition} from '../types';\nimport {MapContext} from './map';\nimport type {MapContextValue} from './map';\n\ntype ControlOptions = {\n  position?: ControlPosition;\n};\n\nexport default function useControl<T extends IControl>(\n  onCreate: (context: MapContextValue) => T,\n  onRemove?: ((context: MapContextValue) => void) | ControlOptions,\n  opts?: ControlOptions\n) {\n  const context = useContext(MapContext);\n  const ctrl = useMemo(() => onCreate(context), []);\n\n  useEffect(() => {\n    const {map} = context;\n    if (!map.hasControl(ctrl)) {\n      map.addControl(ctrl, (opts || (onRemove as ControlOptions))?.position);\n    }\n\n    return () => {\n      if (typeof onRemove === 'function') {\n        onRemove(context);\n      }\n      // Map might have been removed (parent effects are destroyed before child ones)\n      if (map.hasControl(ctrl)) {\n        map.removeControl(ctrl);\n      }\n    };\n  }, []);\n\n  return ctrl;\n}\n"]},"metadata":{},"sourceType":"module"}