{"ast":null,"code":"/**\n * Note: This file was copied from mapbox-gl-draw@1.1.1 because it is no longer accessible in later versions of mapbox-gl-draw which are required for security benefits.\n *\n * If this PR gets merged https://github.com/mapbox/mapbox-gl-draw/pull/1100 or mapbox-gl-draw is forked to maplibre-gl-draw we should investigate removing these files and getting the dependencies from mapbox-gl-draw\n */\nvar constrainFeatureMovement = require(\"./constrain_feature_movement\");\n\nvar Constants = require(\"./constants\");\n\nmodule.exports = function (features, delta) {\n  var constrainedDelta = constrainFeatureMovement(features.map(function (feature) {\n    return feature.toGeoJSON();\n  }), delta);\n  features.forEach(function (feature) {\n    var currentCoordinates = feature.getCoordinates();\n\n    var moveCoordinate = function moveCoordinate(coord) {\n      var point = {\n        lng: coord[0] + constrainedDelta.lng,\n        lat: coord[1] + constrainedDelta.lat\n      };\n      return [point.lng, point.lat];\n    };\n\n    var moveRing = function moveRing(ring) {\n      return ring.map(function (coord) {\n        return moveCoordinate(coord);\n      });\n    };\n\n    var moveMultiPolygon = function moveMultiPolygon(multi) {\n      return multi.map(function (ring) {\n        return moveRing(ring);\n      });\n    };\n\n    var nextCoordinates;\n\n    if (feature.type === Constants.geojsonTypes.POINT) {\n      nextCoordinates = moveCoordinate(currentCoordinates);\n    } else if (feature.type === Constants.geojsonTypes.LINE_STRING || feature.type === Constants.geojsonTypes.MULTI_POINT) {\n      nextCoordinates = currentCoordinates.map(moveCoordinate);\n    } else if (feature.type === Constants.geojsonTypes.POLYGON || feature.type === Constants.geojsonTypes.MULTI_LINE_STRING) {\n      nextCoordinates = currentCoordinates.map(moveRing);\n    } else if (feature.type === Constants.geojsonTypes.MULTI_POLYGON) {\n      nextCoordinates = currentCoordinates.map(moveMultiPolygon);\n    }\n\n    feature.incomingCoords(nextCoordinates);\n  });\n};","map":{"version":3,"names":["constrainFeatureMovement","require","Constants","module","exports","features","delta","constrainedDelta","map","feature","toGeoJSON","forEach","currentCoordinates","getCoordinates","moveCoordinate","coord","point","lng","lat","moveRing","ring","moveMultiPolygon","multi","nextCoordinates","type","geojsonTypes","POINT","LINE_STRING","MULTI_POINT","POLYGON","MULTI_LINE_STRING","MULTI_POLYGON","incomingCoords"],"sources":["C:/Users/lmore/OneDrive/Documents/GitHub/JacksOfAllTrades/jacksofalltrades/node_modules/maplibre-gl-draw-circle/lib/utils/move_features.js"],"sourcesContent":["/**\n * Note: This file was copied from mapbox-gl-draw@1.1.1 because it is no longer accessible in later versions of mapbox-gl-draw which are required for security benefits.\n *\n * If this PR gets merged https://github.com/mapbox/mapbox-gl-draw/pull/1100 or mapbox-gl-draw is forked to maplibre-gl-draw we should investigate removing these files and getting the dependencies from mapbox-gl-draw\n */\n\nconst constrainFeatureMovement = require(\"./constrain_feature_movement\");\nconst Constants = require(\"./constants\");\n\nmodule.exports = function (features, delta) {\n  const constrainedDelta = constrainFeatureMovement(\n    features.map((feature) => feature.toGeoJSON()),\n    delta\n  );\n\n  features.forEach((feature) => {\n    const currentCoordinates = feature.getCoordinates();\n\n    const moveCoordinate = (coord) => {\n      const point = {\n        lng: coord[0] + constrainedDelta.lng,\n        lat: coord[1] + constrainedDelta.lat,\n      };\n      return [point.lng, point.lat];\n    };\n    const moveRing = (ring) => ring.map((coord) => moveCoordinate(coord));\n    const moveMultiPolygon = (multi) => multi.map((ring) => moveRing(ring));\n\n    let nextCoordinates;\n    if (feature.type === Constants.geojsonTypes.POINT) {\n      nextCoordinates = moveCoordinate(currentCoordinates);\n    } else if (feature.type === Constants.geojsonTypes.LINE_STRING || feature.type === Constants.geojsonTypes.MULTI_POINT) {\n      nextCoordinates = currentCoordinates.map(moveCoordinate);\n    } else if (feature.type === Constants.geojsonTypes.POLYGON || feature.type === Constants.geojsonTypes.MULTI_LINE_STRING) {\n      nextCoordinates = currentCoordinates.map(moveRing);\n    } else if (feature.type === Constants.geojsonTypes.MULTI_POLYGON) {\n      nextCoordinates = currentCoordinates.map(moveMultiPolygon);\n    }\n\n    feature.incomingCoords(nextCoordinates);\n  });\n};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AAEA,IAAMA,wBAAwB,GAAGC,OAAO,CAAC,8BAAD,CAAxC;;AACA,IAAMC,SAAS,GAAGD,OAAO,CAAC,aAAD,CAAzB;;AAEAE,MAAM,CAACC,OAAP,GAAiB,UAAUC,QAAV,EAAoBC,KAApB,EAA2B;EAC1C,IAAMC,gBAAgB,GAAGP,wBAAwB,CAC/CK,QAAQ,CAACG,GAAT,CAAa,UAACC,OAAD;IAAA,OAAaA,OAAO,CAACC,SAAR,EAAb;EAAA,CAAb,CAD+C,EAE/CJ,KAF+C,CAAjD;EAKAD,QAAQ,CAACM,OAAT,CAAiB,UAACF,OAAD,EAAa;IAC5B,IAAMG,kBAAkB,GAAGH,OAAO,CAACI,cAAR,EAA3B;;IAEA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,KAAD,EAAW;MAChC,IAAMC,KAAK,GAAG;QACZC,GAAG,EAAEF,KAAK,CAAC,CAAD,CAAL,GAAWR,gBAAgB,CAACU,GADrB;QAEZC,GAAG,EAAEH,KAAK,CAAC,CAAD,CAAL,GAAWR,gBAAgB,CAACW;MAFrB,CAAd;MAIA,OAAO,CAACF,KAAK,CAACC,GAAP,EAAYD,KAAK,CAACE,GAAlB,CAAP;IACD,CAND;;IAOA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,IAAD;MAAA,OAAUA,IAAI,CAACZ,GAAL,CAAS,UAACO,KAAD;QAAA,OAAWD,cAAc,CAACC,KAAD,CAAzB;MAAA,CAAT,CAAV;IAAA,CAAjB;;IACA,IAAMM,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,KAAD;MAAA,OAAWA,KAAK,CAACd,GAAN,CAAU,UAACY,IAAD;QAAA,OAAUD,QAAQ,CAACC,IAAD,CAAlB;MAAA,CAAV,CAAX;IAAA,CAAzB;;IAEA,IAAIG,eAAJ;;IACA,IAAId,OAAO,CAACe,IAAR,KAAiBtB,SAAS,CAACuB,YAAV,CAAuBC,KAA5C,EAAmD;MACjDH,eAAe,GAAGT,cAAc,CAACF,kBAAD,CAAhC;IACD,CAFD,MAEO,IAAIH,OAAO,CAACe,IAAR,KAAiBtB,SAAS,CAACuB,YAAV,CAAuBE,WAAxC,IAAuDlB,OAAO,CAACe,IAAR,KAAiBtB,SAAS,CAACuB,YAAV,CAAuBG,WAAnG,EAAgH;MACrHL,eAAe,GAAGX,kBAAkB,CAACJ,GAAnB,CAAuBM,cAAvB,CAAlB;IACD,CAFM,MAEA,IAAIL,OAAO,CAACe,IAAR,KAAiBtB,SAAS,CAACuB,YAAV,CAAuBI,OAAxC,IAAmDpB,OAAO,CAACe,IAAR,KAAiBtB,SAAS,CAACuB,YAAV,CAAuBK,iBAA/F,EAAkH;MACvHP,eAAe,GAAGX,kBAAkB,CAACJ,GAAnB,CAAuBW,QAAvB,CAAlB;IACD,CAFM,MAEA,IAAIV,OAAO,CAACe,IAAR,KAAiBtB,SAAS,CAACuB,YAAV,CAAuBM,aAA5C,EAA2D;MAChER,eAAe,GAAGX,kBAAkB,CAACJ,GAAnB,CAAuBa,gBAAvB,CAAlB;IACD;;IAEDZ,OAAO,CAACuB,cAAR,CAAuBT,eAAvB;EACD,CAzBD;AA0BD,CAhCD"},"metadata":{},"sourceType":"script"}