{"ast":null,"code":"import { COLOR_BLACK } from \"./constants\";\nimport { getGeofenceFeatureArray } from \"./geofenceUtils\";\nimport { isGeofenceArray, isPolygonArray } from \"./utils\";\nvar FILL_OPACITY = 0.3;\nvar BORDER_OPACITY = 0.5;\nvar BORDER_WIDTH = 4;\n/**\n * DrawPoints utility function for adding points to a map based on coordinate data or a FeatureCollection. Will add clustered points and styled markers by default with options for popups and other styles\n */\n\nexport function drawGeofences(sourceName, data, map) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n  var _a, _b, _c, _d, _e, _f, _g, _h;\n\n  if (!map || typeof map.addSource !== \"function\" || typeof map.addLayer !== \"function\") {\n    throw new Error(\"Please use a maplibre map\");\n  }\n\n  if (data.length > 0 && !isGeofenceArray(data) && !isPolygonArray(data)) {\n    throw new Error(\"Please pass in an array of Geofences or an array of Polygons\");\n  }\n  /*\n   * Data source for features\n   * Convert data passed in as coordinates into feature data\n   */\n\n\n  var sourceId = \"\".concat(sourceName);\n  map.addSource(sourceId, {\n    type: \"geojson\",\n    data: getGeofenceFeatureArray(data),\n    generateId: true\n  });\n  var initialVisiblity = ((_a = options.visible) !== null && _a !== void 0 ? _a : true) ? \"visible\" : \"none\";\n  /*\n   * Draw ui layers for source data\n   */\n\n  var fillLayerId = \"\".concat(sourceName, \"-fill-layer\");\n  map.addLayer({\n    id: fillLayerId,\n    type: \"fill\",\n    source: sourceId,\n    layout: {\n      visibility: initialVisiblity\n    },\n    paint: {\n      \"fill-color\": (_b = options.fillColor) !== null && _b !== void 0 ? _b : COLOR_BLACK,\n      \"fill-opacity\": (_c = options.fillOpacity) !== null && _c !== void 0 ? _c : FILL_OPACITY\n    }\n  }); // Add a black outline around the polygon.\n\n  var outlineLayerId = \"\".concat(sourceName, \"-outline-layer\");\n  map.addLayer({\n    id: outlineLayerId,\n    type: \"line\",\n    source: sourceId,\n    layout: {\n      visibility: initialVisiblity\n    },\n    paint: {\n      \"line-color\": (_d = options.borderColor) !== null && _d !== void 0 ? _d : COLOR_BLACK,\n      \"line-opacity\": (_e = options.borderOpacity) !== null && _e !== void 0 ? _e : BORDER_OPACITY,\n      \"line-width\": (_f = options.borderWidth) !== null && _f !== void 0 ? _f : BORDER_WIDTH,\n      \"line-offset\": (_g = options.borderOffset) !== null && _g !== void 0 ? _g : ((_h = options.borderWidth) !== null && _h !== void 0 ? _h : BORDER_WIDTH) / 2 * -1\n    }\n  }); // utility function for setting layer visibility to none\n\n  var hide = function hide() {\n    map.setLayoutProperty(fillLayerId, \"visibility\", \"none\");\n    map.setLayoutProperty(outlineLayerId, \"visibility\", \"none\");\n  }; // utility function for setting layer visibility to visible\n\n\n  var show = function show() {\n    map.setLayoutProperty(fillLayerId, \"visibility\", \"visible\");\n    map.setLayoutProperty(outlineLayerId, \"visibility\", \"visible\");\n  }; // utility function for checking layer visibility\n\n\n  var isVisible = function isVisible() {\n    var visibility = map.getLayoutProperty(fillLayerId, \"visibility\");\n    return visibility === \"visible\";\n  }; // utility function for setting layer visibility to visible\n\n\n  var setData = function setData(data) {\n    map.getSource(sourceId).setData(data);\n  };\n\n  return {\n    sourceId: sourceId,\n    outlineLayerId: outlineLayerId,\n    fillLayerId: fillLayerId,\n    show: show,\n    hide: hide,\n    isVisible: isVisible,\n    setData: setData\n  };\n}","map":{"version":3,"names":["COLOR_BLACK","getGeofenceFeatureArray","isGeofenceArray","isPolygonArray","FILL_OPACITY","BORDER_OPACITY","BORDER_WIDTH","drawGeofences","sourceName","data","map","options","_a","_b","_c","_d","_e","_f","_g","_h","addSource","addLayer","Error","length","sourceId","type","generateId","initialVisiblity","visible","fillLayerId","id","source","layout","visibility","paint","fillColor","fillOpacity","outlineLayerId","borderColor","borderOpacity","borderWidth","borderOffset","hide","setLayoutProperty","show","isVisible","getLayoutProperty","setData","getSource"],"sources":["C:/Users/lmore/OneDrive/Documents/GitHub/JacksOfAllTrades/jacksofalltrades/node_modules/maplibre-gl-js-amplify/lib/esm/drawGeofences.js"],"sourcesContent":["import { COLOR_BLACK } from \"./constants\";\nimport { getGeofenceFeatureArray } from \"./geofenceUtils\";\nimport { isGeofenceArray, isPolygonArray } from \"./utils\";\nconst FILL_OPACITY = 0.3;\nconst BORDER_OPACITY = 0.5;\nconst BORDER_WIDTH = 4;\n/**\n * DrawPoints utility function for adding points to a map based on coordinate data or a FeatureCollection. Will add clustered points and styled markers by default with options for popups and other styles\n */\nexport function drawGeofences(sourceName, data, map, options = {}) {\n    var _a, _b, _c, _d, _e, _f, _g, _h;\n    if (!map ||\n        typeof map.addSource !== \"function\" ||\n        typeof map.addLayer !== \"function\") {\n        throw new Error(\"Please use a maplibre map\");\n    }\n    if (data.length > 0 && !isGeofenceArray(data) && !isPolygonArray(data)) {\n        throw new Error(\"Please pass in an array of Geofences or an array of Polygons\");\n    }\n    /*\n     * Data source for features\n     * Convert data passed in as coordinates into feature data\n     */\n    const sourceId = `${sourceName}`;\n    map.addSource(sourceId, {\n        type: \"geojson\",\n        data: getGeofenceFeatureArray(data),\n        generateId: true,\n    });\n    const initialVisiblity = ((_a = options.visible) !== null && _a !== void 0 ? _a : true) ? \"visible\" : \"none\";\n    /*\n     * Draw ui layers for source data\n     */\n    const fillLayerId = `${sourceName}-fill-layer`;\n    map.addLayer({\n        id: fillLayerId,\n        type: \"fill\",\n        source: sourceId,\n        layout: {\n            visibility: initialVisiblity,\n        },\n        paint: {\n            \"fill-color\": (_b = options.fillColor) !== null && _b !== void 0 ? _b : COLOR_BLACK,\n            \"fill-opacity\": (_c = options.fillOpacity) !== null && _c !== void 0 ? _c : FILL_OPACITY,\n        },\n    });\n    // Add a black outline around the polygon.\n    const outlineLayerId = `${sourceName}-outline-layer`;\n    map.addLayer({\n        id: outlineLayerId,\n        type: \"line\",\n        source: sourceId,\n        layout: {\n            visibility: initialVisiblity,\n        },\n        paint: {\n            \"line-color\": (_d = options.borderColor) !== null && _d !== void 0 ? _d : COLOR_BLACK,\n            \"line-opacity\": (_e = options.borderOpacity) !== null && _e !== void 0 ? _e : BORDER_OPACITY,\n            \"line-width\": (_f = options.borderWidth) !== null && _f !== void 0 ? _f : BORDER_WIDTH,\n            \"line-offset\": (_g = options.borderOffset) !== null && _g !== void 0 ? _g : (((_h = options.borderWidth) !== null && _h !== void 0 ? _h : BORDER_WIDTH) / 2) * -1,\n        },\n    });\n    // utility function for setting layer visibility to none\n    const hide = () => {\n        map.setLayoutProperty(fillLayerId, \"visibility\", \"none\");\n        map.setLayoutProperty(outlineLayerId, \"visibility\", \"none\");\n    };\n    // utility function for setting layer visibility to visible\n    const show = () => {\n        map.setLayoutProperty(fillLayerId, \"visibility\", \"visible\");\n        map.setLayoutProperty(outlineLayerId, \"visibility\", \"visible\");\n    };\n    // utility function for checking layer visibility\n    const isVisible = () => {\n        const visibility = map.getLayoutProperty(fillLayerId, \"visibility\");\n        return visibility === \"visible\";\n    };\n    // utility function for setting layer visibility to visible\n    const setData = (data) => {\n        map.getSource(sourceId).setData(data);\n    };\n    return {\n        sourceId,\n        outlineLayerId,\n        fillLayerId,\n        show,\n        hide,\n        isVisible,\n        setData,\n    };\n}\n"],"mappings":"AAAA,SAASA,WAAT,QAA4B,aAA5B;AACA,SAASC,uBAAT,QAAwC,iBAAxC;AACA,SAASC,eAAT,EAA0BC,cAA1B,QAAgD,SAAhD;AACA,IAAMC,YAAY,GAAG,GAArB;AACA,IAAMC,cAAc,GAAG,GAAvB;AACA,IAAMC,YAAY,GAAG,CAArB;AACA;AACA;AACA;;AACA,OAAO,SAASC,aAAT,CAAuBC,UAAvB,EAAmCC,IAAnC,EAAyCC,GAAzC,EAA4D;EAAA,IAAdC,OAAc,uEAAJ,EAAI;;EAC/D,IAAIC,EAAJ,EAAQC,EAAR,EAAYC,EAAZ,EAAgBC,EAAhB,EAAoBC,EAApB,EAAwBC,EAAxB,EAA4BC,EAA5B,EAAgCC,EAAhC;;EACA,IAAI,CAACT,GAAD,IACA,OAAOA,GAAG,CAACU,SAAX,KAAyB,UADzB,IAEA,OAAOV,GAAG,CAACW,QAAX,KAAwB,UAF5B,EAEwC;IACpC,MAAM,IAAIC,KAAJ,CAAU,2BAAV,CAAN;EACH;;EACD,IAAIb,IAAI,CAACc,MAAL,GAAc,CAAd,IAAmB,CAACrB,eAAe,CAACO,IAAD,CAAnC,IAA6C,CAACN,cAAc,CAACM,IAAD,CAAhE,EAAwE;IACpE,MAAM,IAAIa,KAAJ,CAAU,8DAAV,CAAN;EACH;EACD;AACJ;AACA;AACA;;;EACI,IAAME,QAAQ,aAAMhB,UAAN,CAAd;EACAE,GAAG,CAACU,SAAJ,CAAcI,QAAd,EAAwB;IACpBC,IAAI,EAAE,SADc;IAEpBhB,IAAI,EAAER,uBAAuB,CAACQ,IAAD,CAFT;IAGpBiB,UAAU,EAAE;EAHQ,CAAxB;EAKA,IAAMC,gBAAgB,GAAG,CAAC,CAACf,EAAE,GAAGD,OAAO,CAACiB,OAAd,MAA2B,IAA3B,IAAmChB,EAAE,KAAK,KAAK,CAA/C,GAAmDA,EAAnD,GAAwD,IAAzD,IAAiE,SAAjE,GAA6E,MAAtG;EACA;AACJ;AACA;;EACI,IAAMiB,WAAW,aAAMrB,UAAN,gBAAjB;EACAE,GAAG,CAACW,QAAJ,CAAa;IACTS,EAAE,EAAED,WADK;IAETJ,IAAI,EAAE,MAFG;IAGTM,MAAM,EAAEP,QAHC;IAITQ,MAAM,EAAE;MACJC,UAAU,EAAEN;IADR,CAJC;IAOTO,KAAK,EAAE;MACH,cAAc,CAACrB,EAAE,GAAGF,OAAO,CAACwB,SAAd,MAA6B,IAA7B,IAAqCtB,EAAE,KAAK,KAAK,CAAjD,GAAqDA,EAArD,GAA0Db,WADrE;MAEH,gBAAgB,CAACc,EAAE,GAAGH,OAAO,CAACyB,WAAd,MAA+B,IAA/B,IAAuCtB,EAAE,KAAK,KAAK,CAAnD,GAAuDA,EAAvD,GAA4DV;IAFzE;EAPE,CAAb,EAzB+D,CAqC/D;;EACA,IAAMiC,cAAc,aAAM7B,UAAN,mBAApB;EACAE,GAAG,CAACW,QAAJ,CAAa;IACTS,EAAE,EAAEO,cADK;IAETZ,IAAI,EAAE,MAFG;IAGTM,MAAM,EAAEP,QAHC;IAITQ,MAAM,EAAE;MACJC,UAAU,EAAEN;IADR,CAJC;IAOTO,KAAK,EAAE;MACH,cAAc,CAACnB,EAAE,GAAGJ,OAAO,CAAC2B,WAAd,MAA+B,IAA/B,IAAuCvB,EAAE,KAAK,KAAK,CAAnD,GAAuDA,EAAvD,GAA4Df,WADvE;MAEH,gBAAgB,CAACgB,EAAE,GAAGL,OAAO,CAAC4B,aAAd,MAAiC,IAAjC,IAAyCvB,EAAE,KAAK,KAAK,CAArD,GAAyDA,EAAzD,GAA8DX,cAF3E;MAGH,cAAc,CAACY,EAAE,GAAGN,OAAO,CAAC6B,WAAd,MAA+B,IAA/B,IAAuCvB,EAAE,KAAK,KAAK,CAAnD,GAAuDA,EAAvD,GAA4DX,YAHvE;MAIH,eAAe,CAACY,EAAE,GAAGP,OAAO,CAAC8B,YAAd,MAAgC,IAAhC,IAAwCvB,EAAE,KAAK,KAAK,CAApD,GAAwDA,EAAxD,GAA8D,CAAC,CAACC,EAAE,GAAGR,OAAO,CAAC6B,WAAd,MAA+B,IAA/B,IAAuCrB,EAAE,KAAK,KAAK,CAAnD,GAAuDA,EAAvD,GAA4Db,YAA7D,IAA6E,CAA9E,GAAmF,CAAC;IAJ7J;EAPE,CAAb,EAvC+D,CAqD/D;;EACA,IAAMoC,IAAI,GAAG,SAAPA,IAAO,GAAM;IACfhC,GAAG,CAACiC,iBAAJ,CAAsBd,WAAtB,EAAmC,YAAnC,EAAiD,MAAjD;IACAnB,GAAG,CAACiC,iBAAJ,CAAsBN,cAAtB,EAAsC,YAAtC,EAAoD,MAApD;EACH,CAHD,CAtD+D,CA0D/D;;;EACA,IAAMO,IAAI,GAAG,SAAPA,IAAO,GAAM;IACflC,GAAG,CAACiC,iBAAJ,CAAsBd,WAAtB,EAAmC,YAAnC,EAAiD,SAAjD;IACAnB,GAAG,CAACiC,iBAAJ,CAAsBN,cAAtB,EAAsC,YAAtC,EAAoD,SAApD;EACH,CAHD,CA3D+D,CA+D/D;;;EACA,IAAMQ,SAAS,GAAG,SAAZA,SAAY,GAAM;IACpB,IAAMZ,UAAU,GAAGvB,GAAG,CAACoC,iBAAJ,CAAsBjB,WAAtB,EAAmC,YAAnC,CAAnB;IACA,OAAOI,UAAU,KAAK,SAAtB;EACH,CAHD,CAhE+D,CAoE/D;;;EACA,IAAMc,OAAO,GAAG,SAAVA,OAAU,CAACtC,IAAD,EAAU;IACtBC,GAAG,CAACsC,SAAJ,CAAcxB,QAAd,EAAwBuB,OAAxB,CAAgCtC,IAAhC;EACH,CAFD;;EAGA,OAAO;IACHe,QAAQ,EAARA,QADG;IAEHa,cAAc,EAAdA,cAFG;IAGHR,WAAW,EAAXA,WAHG;IAIHe,IAAI,EAAJA,IAJG;IAKHF,IAAI,EAAJA,IALG;IAMHG,SAAS,EAATA,SANG;IAOHE,OAAO,EAAPA;EAPG,CAAP;AASH"},"metadata":{},"sourceType":"module"}