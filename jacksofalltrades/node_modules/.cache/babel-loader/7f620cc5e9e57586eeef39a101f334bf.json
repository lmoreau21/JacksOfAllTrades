{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/lmore/OneDrive/Documents/GitHub/JacksOfAllTrades/jacksofalltrades/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _slicedToArray from \"C:/Users/lmore/OneDrive/Documents/GitHub/JacksOfAllTrades/jacksofalltrades/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { __awaiter as e } from \"tslib\";\nimport t from \"qrcode\";\nimport * as o from \"react\";\nimport { Logger as r, Auth as a } from \"aws-amplify\";\nimport { translate as i, getActorState as n, getTotpCode as l } from \"@aws-amplify/ui\";\nimport { Flex as m } from \"../../../primitives/Flex/Flex.js\";\nimport { Heading as s } from \"../../../primitives/Heading/Heading.js\";\nimport { useAuthenticator as c } from \"../hooks/useAuthenticator/index.js\";\nimport { useCustomComponents as d } from \"../hooks/useCustomComponents/index.js\";\nimport { useFormHandlers as u } from \"../hooks/useFormHandlers/useFormHandlers.js\";\nimport { ConfirmSignInFooter as p } from \"../shared/ConfirmSignInFooter.js\";\nimport { RemoteErrorMessage as f } from \"../shared/RemoteErrorMessage.js\";\nimport { FormFields as h } from \"../shared/FormFields.js\";\nimport { RouteContainer as v } from \"../RouteContainer/RouteContainer.js\";\n\nvar E = new r(\"SetupTOTP-logger\"),\n    g = function g(_ref) {\n  var r = _ref.className,\n      s = _ref.variation;\n  var C, y;\n\n  var _c = c(function (e) {\n    return [e.isPending];\n  }),\n      H = _c._state,\n      w = _c.isPending,\n      _u = u(),\n      F = _u.handleChange,\n      S = _u.handleSubmit,\n      _d = d(),\n      _d$components$SetupTO = _d.components.SetupTOTP,\n      _d$components$SetupTO2 = _d$components$SetupTO.Header,\n      T = _d$components$SetupTO2 === void 0 ? g.Header : _d$components$SetupTO2,\n      _d$components$SetupTO3 = _d$components$SetupTO.Footer,\n      j = _d$components$SetupTO3 === void 0 ? g.Footer : _d$components$SetupTO3,\n      _o$useState = o.useState(!0),\n      _o$useState2 = _slicedToArray(_o$useState, 2),\n      x = _o$useState2[0],\n      P = _o$useState2[1],\n      _o$useState3 = o.useState(),\n      _o$useState4 = _slicedToArray(_o$useState3, 2),\n      O = _o$useState4[0],\n      V = _o$useState4[1],\n      _o$useState5 = o.useState(\"COPY\"),\n      _o$useState6 = _slicedToArray(_o$useState5, 2),\n      b = _o$useState6[0],\n      k = _o$useState6[1],\n      _o$useState7 = o.useState(\"\"),\n      _o$useState8 = _slicedToArray(_o$useState7, 2),\n      R = _o$useState8[0],\n      L = _o$useState8[1],\n      M = n(H),\n      _M$context = M.context,\n      q = _M$context.formFields,\n      D = _M$context.user,\n      _ref2 = null !== (y = null === (C = null == q ? void 0 : q.setupTOTP) || void 0 === C ? void 0 : C.QR) && void 0 !== y ? y : {},\n      _ref2$totpIssuer = _ref2.totpIssuer,\n      I = _ref2$totpIssuer === void 0 ? \"AWSCognito\" : _ref2$totpIssuer,\n      _ref2$totpUsername = _ref2.totpUsername,\n      Z = _ref2$totpUsername === void 0 ? null == D ? void 0 : D.username : _ref2$totpUsername,\n      A = o.useCallback(function (o) {\n    return e(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var _e, _r, _i;\n\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return a.setupTOTP(o);\n\n            case 3:\n              _e = _context.sent;\n              L(_e);\n              _r = l(I, Z, _e);\n              _context.next = 8;\n              return t.toDataURL(_r);\n\n            case 8:\n              _i = _context.sent;\n              V(_i);\n              _context.next = 15;\n              break;\n\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](0);\n              E.error(_context.t0);\n\n            case 15:\n              _context.prev = 15;\n              P(!1);\n              return _context.finish(15);\n\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 12, 15, 18]]);\n    }));\n  }, [I, Z]);\n\n  o.useEffect(function () {\n    D && A(D);\n  }, [A, D]);\n  return o.createElement(v, {\n    className: r,\n    variation: s\n  }, o.createElement(\"form\", {\n    \"data-amplify-form\": \"\",\n    \"data-amplify-authenticator-setup-totp\": \"\",\n    method: \"post\",\n    onChange: F,\n    onSubmit: S\n  }, o.createElement(m, {\n    as: \"fieldset\",\n    direction: \"column\",\n    isDisabled: w\n  }, o.createElement(T, null), o.createElement(m, {\n    direction: \"column\"\n  }, x ? o.createElement(\"p\", null, i(\"Loading\"), \"…\") : o.createElement(\"img\", {\n    \"data-amplify-qrcode\": !0,\n    src: O,\n    alt: \"qr code\",\n    width: \"228\",\n    height: \"228\"\n  }), o.createElement(m, {\n    \"data-amplify-copy\": !0\n  }, o.createElement(\"div\", null, R), o.createElement(m, {\n    \"data-amplify-copy-svg\": !0,\n    onClick: function onClick() {\n      navigator.clipboard.writeText(R), k(i(\"COPIED\"));\n    }\n  }, o.createElement(\"div\", {\n    \"data-amplify-copy-tooltip\": !0\n  }, b), o.createElement(\"svg\", {\n    width: \"24\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, o.createElement(\"path\", {\n    d: \"M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM15 5H8C6.9 5 6.01 5.9 6.01 7L6 21C6 22.1 6.89 23 7.99 23H19C20.1 23 21 22.1 21 21V11L15 5ZM8 21V7H14V12H19V21H8Z\"\n  })))), o.createElement(h, null), o.createElement(f, null)), o.createElement(p, null), o.createElement(j, null))));\n};\n\ng.Header = function () {\n  return o.createElement(s, {\n    level: 3\n  }, i(\"Setup TOTP\"));\n}, g.Footer = function () {\n  return null;\n};\nexport { g as SetupTOTP };","map":{"version":3,"names":["__awaiter","e","t","o","Logger","r","Auth","a","translate","i","getActorState","n","getTotpCode","l","Flex","m","Heading","s","useAuthenticator","c","useCustomComponents","d","useFormHandlers","u","ConfirmSignInFooter","p","RemoteErrorMessage","f","FormFields","h","RouteContainer","v","E","g","className","variation","C","y","isPending","H","_state","w","F","handleChange","S","handleSubmit","components","SetupTOTP","Header","T","Footer","j","useState","x","P","O","V","b","k","R","L","M","context","q","formFields","D","user","setupTOTP","QR","totpIssuer","I","totpUsername","Z","username","A","useCallback","toDataURL","error","useEffect","createElement","method","onChange","onSubmit","as","direction","isDisabled","src","alt","width","height","onClick","navigator","clipboard","writeText","viewBox","xmlns","level"],"sources":["C:/Users/lmore/OneDrive/Documents/GitHub/JacksOfAllTrades/jacksofalltrades/node_modules/@aws-amplify/ui-react/dist/esm/components/Authenticator/SetupTOTP/SetupTOTP.js"],"sourcesContent":["import{__awaiter as e}from\"tslib\";import t from\"qrcode\";import*as o from\"react\";import{Logger as r,Auth as a}from\"aws-amplify\";import{translate as i,getActorState as n,getTotpCode as l}from\"@aws-amplify/ui\";import{Flex as m}from\"../../../primitives/Flex/Flex.js\";import{Heading as s}from\"../../../primitives/Heading/Heading.js\";import{useAuthenticator as c}from\"../hooks/useAuthenticator/index.js\";import{useCustomComponents as d}from\"../hooks/useCustomComponents/index.js\";import{useFormHandlers as u}from\"../hooks/useFormHandlers/useFormHandlers.js\";import{ConfirmSignInFooter as p}from\"../shared/ConfirmSignInFooter.js\";import{RemoteErrorMessage as f}from\"../shared/RemoteErrorMessage.js\";import{FormFields as h}from\"../shared/FormFields.js\";import{RouteContainer as v}from\"../RouteContainer/RouteContainer.js\";const E=new r(\"SetupTOTP-logger\"),g=({className:r,variation:s})=>{var C,y;const{_state:H,isPending:w}=c((e=>[e.isPending])),{handleChange:F,handleSubmit:S}=u(),{components:{SetupTOTP:{Header:T=g.Header,Footer:j=g.Footer}}}=d(),[x,P]=o.useState(!0),[O,V]=o.useState(),[b,k]=o.useState(\"COPY\"),[R,L]=o.useState(\"\"),M=n(H),{formFields:q,user:D}=M.context,{totpIssuer:I=\"AWSCognito\",totpUsername:Z=(null==D?void 0:D.username)}=null!==(y=null===(C=null==q?void 0:q.setupTOTP)||void 0===C?void 0:C.QR)&&void 0!==y?y:{},A=o.useCallback((o=>e(void 0,void 0,void 0,(function*(){try{const e=yield a.setupTOTP(o);L(e);const r=l(I,Z,e),i=yield t.toDataURL(r);V(i)}catch(e){E.error(e)}finally{P(!1)}}))),[I,Z]);o.useEffect((()=>{D&&A(D)}),[A,D]);return o.createElement(v,{className:r,variation:s},o.createElement(\"form\",{\"data-amplify-form\":\"\",\"data-amplify-authenticator-setup-totp\":\"\",method:\"post\",onChange:F,onSubmit:S},o.createElement(m,{as:\"fieldset\",direction:\"column\",isDisabled:w},o.createElement(T,null),o.createElement(m,{direction:\"column\"},x?o.createElement(\"p\",null,i(\"Loading\"),\"…\"):o.createElement(\"img\",{\"data-amplify-qrcode\":!0,src:O,alt:\"qr code\",width:\"228\",height:\"228\"}),o.createElement(m,{\"data-amplify-copy\":!0},o.createElement(\"div\",null,R),o.createElement(m,{\"data-amplify-copy-svg\":!0,onClick:()=>{navigator.clipboard.writeText(R),k(i(\"COPIED\"))}},o.createElement(\"div\",{\"data-amplify-copy-tooltip\":!0},b),o.createElement(\"svg\",{width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\"},o.createElement(\"path\",{d:\"M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM15 5H8C6.9 5 6.01 5.9 6.01 7L6 21C6 22.1 6.89 23 7.99 23H19C20.1 23 21 22.1 21 21V11L15 5ZM8 21V7H14V12H19V21H8Z\"})))),o.createElement(h,null),o.createElement(f,null)),o.createElement(p,null),o.createElement(j,null))))};g.Header=function(){return o.createElement(s,{level:3},i(\"Setup TOTP\"))},g.Footer=function(){return null};export{g as SetupTOTP};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}