{"ast":null,"code":"import { __awaiter as e } from \"tslib\";\nimport t from \"qrcode\";\nimport * as o from \"react\";\nimport { Logger as r, Auth as a } from \"aws-amplify\";\nimport { translate as i, getActorState as n, getTotpCode as l } from \"@aws-amplify/ui\";\nimport { Flex as m } from \"../../../primitives/Flex/Flex.js\";\nimport { Heading as s } from \"../../../primitives/Heading/Heading.js\";\nimport { useAuthenticator as c } from \"../hooks/useAuthenticator/index.js\";\nimport { useCustomComponents as d } from \"../hooks/useCustomComponents/index.js\";\nimport { useFormHandlers as u } from \"../hooks/useFormHandlers/useFormHandlers.js\";\nimport { ConfirmSignInFooter as p } from \"../shared/ConfirmSignInFooter.js\";\nimport { RemoteErrorMessage as f } from \"../shared/RemoteErrorMessage.js\";\nimport { FormFields as h } from \"../shared/FormFields.js\";\nimport { RouteContainer as v } from \"../RouteContainer/RouteContainer.js\";\n\nconst E = new r(\"SetupTOTP-logger\"),\n      g = _ref => {\n  let {\n    className: r,\n    variation: s\n  } = _ref;\n  var C, y;\n  const {\n    _state: H,\n    isPending: w\n  } = c(e => [e.isPending]),\n        {\n    handleChange: F,\n    handleSubmit: S\n  } = u(),\n        {\n    components: {\n      SetupTOTP: {\n        Header: T = g.Header,\n        Footer: j = g.Footer\n      }\n    }\n  } = d(),\n        [x, P] = o.useState(!0),\n        [O, V] = o.useState(),\n        [b, k] = o.useState(\"COPY\"),\n        [R, L] = o.useState(\"\"),\n        M = n(H),\n        {\n    formFields: q,\n    user: D\n  } = M.context,\n        {\n    totpIssuer: I = \"AWSCognito\",\n    totpUsername: Z = null == D ? void 0 : D.username\n  } = null !== (y = null === (C = null == q ? void 0 : q.setupTOTP) || void 0 === C ? void 0 : C.QR) && void 0 !== y ? y : {},\n        A = o.useCallback(o => e(void 0, void 0, void 0, function* () {\n    try {\n      const e = yield a.setupTOTP(o);\n      L(e);\n      const r = l(I, Z, e),\n            i = yield t.toDataURL(r);\n      V(i);\n    } catch (e) {\n      E.error(e);\n    } finally {\n      P(!1);\n    }\n  }), [I, Z]);\n  o.useEffect(() => {\n    D && A(D);\n  }, [A, D]);\n  return o.createElement(v, {\n    className: r,\n    variation: s\n  }, o.createElement(\"form\", {\n    \"data-amplify-form\": \"\",\n    \"data-amplify-authenticator-setup-totp\": \"\",\n    method: \"post\",\n    onChange: F,\n    onSubmit: S\n  }, o.createElement(m, {\n    as: \"fieldset\",\n    direction: \"column\",\n    isDisabled: w\n  }, o.createElement(T, null), o.createElement(m, {\n    direction: \"column\"\n  }, x ? o.createElement(\"p\", null, i(\"Loading\"), \"…\") : o.createElement(\"img\", {\n    \"data-amplify-qrcode\": !0,\n    src: O,\n    alt: \"qr code\",\n    width: \"228\",\n    height: \"228\"\n  }), o.createElement(m, {\n    \"data-amplify-copy\": !0\n  }, o.createElement(\"div\", null, R), o.createElement(m, {\n    \"data-amplify-copy-svg\": !0,\n    onClick: () => {\n      navigator.clipboard.writeText(R), k(i(\"COPIED\"));\n    }\n  }, o.createElement(\"div\", {\n    \"data-amplify-copy-tooltip\": !0\n  }, b), o.createElement(\"svg\", {\n    width: \"24\",\n    height: \"24\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, o.createElement(\"path\", {\n    d: \"M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM15 5H8C6.9 5 6.01 5.9 6.01 7L6 21C6 22.1 6.89 23 7.99 23H19C20.1 23 21 22.1 21 21V11L15 5ZM8 21V7H14V12H19V21H8Z\"\n  })))), o.createElement(h, null), o.createElement(f, null)), o.createElement(p, null), o.createElement(j, null))));\n};\n\ng.Header = function () {\n  return o.createElement(s, {\n    level: 3\n  }, i(\"Setup TOTP\"));\n}, g.Footer = function () {\n  return null;\n};\nexport { g as SetupTOTP };","map":{"version":3,"names":["__awaiter","e","t","o","Logger","r","Auth","a","translate","i","getActorState","n","getTotpCode","l","Flex","m","Heading","s","useAuthenticator","c","useCustomComponents","d","useFormHandlers","u","ConfirmSignInFooter","p","RemoteErrorMessage","f","FormFields","h","RouteContainer","v","E","g","className","variation","C","y","_state","H","isPending","w","handleChange","F","handleSubmit","S","components","SetupTOTP","Header","T","Footer","j","x","P","useState","O","V","b","k","R","L","M","formFields","q","user","D","context","totpIssuer","I","totpUsername","Z","username","setupTOTP","QR","A","useCallback","toDataURL","error","useEffect","createElement","method","onChange","onSubmit","as","direction","isDisabled","src","alt","width","height","onClick","navigator","clipboard","writeText","viewBox","xmlns","level"],"sources":["C:/Users/lmore/OneDrive/Documents/GitHub/JacksOfAllTrades/jacksofalltrades/node_modules/@aws-amplify/ui-react/dist/esm/components/Authenticator/SetupTOTP/SetupTOTP.js"],"sourcesContent":["import{__awaiter as e}from\"tslib\";import t from\"qrcode\";import*as o from\"react\";import{Logger as r,Auth as a}from\"aws-amplify\";import{translate as i,getActorState as n,getTotpCode as l}from\"@aws-amplify/ui\";import{Flex as m}from\"../../../primitives/Flex/Flex.js\";import{Heading as s}from\"../../../primitives/Heading/Heading.js\";import{useAuthenticator as c}from\"../hooks/useAuthenticator/index.js\";import{useCustomComponents as d}from\"../hooks/useCustomComponents/index.js\";import{useFormHandlers as u}from\"../hooks/useFormHandlers/useFormHandlers.js\";import{ConfirmSignInFooter as p}from\"../shared/ConfirmSignInFooter.js\";import{RemoteErrorMessage as f}from\"../shared/RemoteErrorMessage.js\";import{FormFields as h}from\"../shared/FormFields.js\";import{RouteContainer as v}from\"../RouteContainer/RouteContainer.js\";const E=new r(\"SetupTOTP-logger\"),g=({className:r,variation:s})=>{var C,y;const{_state:H,isPending:w}=c((e=>[e.isPending])),{handleChange:F,handleSubmit:S}=u(),{components:{SetupTOTP:{Header:T=g.Header,Footer:j=g.Footer}}}=d(),[x,P]=o.useState(!0),[O,V]=o.useState(),[b,k]=o.useState(\"COPY\"),[R,L]=o.useState(\"\"),M=n(H),{formFields:q,user:D}=M.context,{totpIssuer:I=\"AWSCognito\",totpUsername:Z=(null==D?void 0:D.username)}=null!==(y=null===(C=null==q?void 0:q.setupTOTP)||void 0===C?void 0:C.QR)&&void 0!==y?y:{},A=o.useCallback((o=>e(void 0,void 0,void 0,(function*(){try{const e=yield a.setupTOTP(o);L(e);const r=l(I,Z,e),i=yield t.toDataURL(r);V(i)}catch(e){E.error(e)}finally{P(!1)}}))),[I,Z]);o.useEffect((()=>{D&&A(D)}),[A,D]);return o.createElement(v,{className:r,variation:s},o.createElement(\"form\",{\"data-amplify-form\":\"\",\"data-amplify-authenticator-setup-totp\":\"\",method:\"post\",onChange:F,onSubmit:S},o.createElement(m,{as:\"fieldset\",direction:\"column\",isDisabled:w},o.createElement(T,null),o.createElement(m,{direction:\"column\"},x?o.createElement(\"p\",null,i(\"Loading\"),\"…\"):o.createElement(\"img\",{\"data-amplify-qrcode\":!0,src:O,alt:\"qr code\",width:\"228\",height:\"228\"}),o.createElement(m,{\"data-amplify-copy\":!0},o.createElement(\"div\",null,R),o.createElement(m,{\"data-amplify-copy-svg\":!0,onClick:()=>{navigator.clipboard.writeText(R),k(i(\"COPIED\"))}},o.createElement(\"div\",{\"data-amplify-copy-tooltip\":!0},b),o.createElement(\"svg\",{width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\"},o.createElement(\"path\",{d:\"M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM15 5H8C6.9 5 6.01 5.9 6.01 7L6 21C6 22.1 6.89 23 7.99 23H19C20.1 23 21 22.1 21 21V11L15 5ZM8 21V7H14V12H19V21H8Z\"})))),o.createElement(h,null),o.createElement(f,null)),o.createElement(p,null),o.createElement(j,null))))};g.Header=function(){return o.createElement(s,{level:3},i(\"Setup TOTP\"))},g.Footer=function(){return null};export{g as SetupTOTP};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}